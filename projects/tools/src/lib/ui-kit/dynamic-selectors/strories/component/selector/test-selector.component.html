<rtui-dynamic-selector
    placeholderDescription="Choose Users"
    keyExp="id"
    displayExp="name"
    navigateButtonTitle="Nav button"
    navigateLink="link"
    [formControl]="form"
    [isMobile]="isMobile"
    [loading]="loading"
    [fetching]="fetching"
    [entities]="entities"
    [isSingleSelection]="isSingleMode"
    [isListDraggable]="isListDraggable"
    [readonlyEntitiesKeys]="hasReadonly ? readonlyEntitiesKeys : []"
    [buttonTitle]="form.value?.length ? (isSingleMode ? 'Change' : 'Add') : 'Choose'"
    [isPlaceholderShown]="!form.value?.length"
    [placeholderIcon]="'person'"
    [isMultiToggleShown]="isMultiToggleShown"
    [(chosenEntities)]="chosenEntities"
    (selectionChangeAction)="onSelectionChange($event)">
    @if (isAdditionalControlShown) {
        <ng-container *rtuiDynamicSelectorAdditionalControlDirective="let entity" rtBlock="rtui-dynamic-selector">
            <div rtElem="item-control">
                <div rtElem="item-control-label">Label</div>

                <button
                    mat-icon-button
                    type="button"
                    rtElem="item-control-button"
                    matTooltip="Info"
                    matTooltipPosition="left"
                    [matTooltipDisabled]="isMobile"
                    (click)="onAdditionalControlClick(entity)">
                    <mat-icon [rtIconOutlinedDirective]="true">info</mat-icon>
                </button>
            </div>

            <div rtElem="item-control">
                <button
                    mat-icon-button
                    type="button"
                    rtElem="item-control-button"
                    matTooltip="Reset to initial list"
                    matTooltipPosition="left"
                    [matTooltipDisabled]="isMobile"
                    (click)="onAdditionalControlClick(entity)">
                    <mat-icon [rtIconOutlinedDirective]="true">star</mat-icon>
                </button>
            </div>
        </ng-container>
    }
</rtui-dynamic-selector>
