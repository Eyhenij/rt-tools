@use '@angular/material' as mat;
@use './palette' as *;
@use './base';

@include mat.core();

$matx-theme: mat.define-theme(
        (
            color: (
                theme-type: $main-theme,
                primary: $custom-primary-color,
                tertiary: $custom-tertiary-color,
            ),
            typography: (
                plain-family: var(--font-default),
                bold-weight: 900,
                medium-weight: 500,
                regular-weight: 400,
            ),
            density: (
                scale: -1,
            ),
        )
);

.matx-theme {
    @include mat.all-component-themes($matx-theme);

    // M3 missed styles
    .mat-elevation-z8,
    .mat-mdc-elevation-specific.mat-elevation-z8 {
        box-shadow:
            0 5px 5px -3px #0003,
            0 8px 10px 1px #00000024,
            0 3px 14px 2px #0000001f;
    }
    .cdk-overlay-container {
        z-index: 9999;
    }

    --mat-select-panel-background-color: #ffffff;
    --mat-autocomplete-background-color: #ffffff;
    --mat-menu-container-color: #ffffff;

    --mdc-fab-small-container-shape: 50%;
    --mdc-filled-button-container-color: var(--clr-base-accent);
}

// For correct displaying modal height in storybook
.mat-mdc-dialog-container {
    max-height: 100vh;
}

.mat-form-field {
    line-height: normal;
}

.mat-form-field.transaction-outline {
    &.ng-invalid.ng-touched {
        .mat-select-placeholder {
            color: red;
        }
    }

    .mat-form-field-outline-gap,
    .mat-form-field-outline-start,
    .mat-form-field-outline-end {
        border: none;
    }

    .mat-select-arrow-wrapper {
        opacity: 0;
    }

    .mat-form-field-flex:hover {
        .mat-form-field-outline-start {
            border-top: 2px solid var(--clr-base-accent);
            border-left: 2px solid var(--clr-base-accent);
            border-bottom: 2px solid var(--clr-base-accent);
        }

        .mat-form-field-outline-gap {
            border-top: 2px solid var(--clr-base-accent);
            border-bottom: 2px solid var(--clr-base-accent);
        }

        .mat-form-field-outline-end {
            border-top: 2px solid var(--clr-base-accent) -primary-color;
            border-right: 2px solid var(--clr-base-accent);
            border-bottom: 2px solid var(--clr-base-accent);
        }

        .mat-select-arrow-wrapper {
            opacity: 1;
        }
    }

    &.mat-form-field-should-float {
        .mat-form-field-outline-gap {
            border-top: transparent !important;
        }
    }

    &.low-height {
        width: 100%;

        .mat-form-field-wrapper {
            height: 2.5rem;
            margin: 0;
            padding: 0;

            .mat-form-field-flex {
                padding: 0 0.5rem;

                height: 2.8rem;
                margin: 0;
                position: relative;
                top: -5px;
            }
        }

        .mat-form-field-infix {
            padding: 0;
            margin: 0;

            top: -3px;
        }

        .mat-select-arrow-wrapper {
            position: relative;
            top: 7px;
        }
    }
}
